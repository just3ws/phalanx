{
  "$ref": "#/definitions/GameState",
  "definitions": {
    "GameState": {
      "type": "object",
      "properties": {
        "players": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "player": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50
                  }
                },
                "required": [
                  "id",
                  "name"
                ],
                "additionalProperties": false
              },
              "hand": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "suit": {
                      "type": "string",
                      "enum": [
                        "spades",
                        "hearts",
                        "diamonds",
                        "clubs"
                      ]
                    },
                    "rank": {
                      "type": "string",
                      "enum": [
                        "A",
                        "2",
                        "3",
                        "4",
                        "5",
                        "6",
                        "7",
                        "8",
                        "9",
                        "T",
                        "J",
                        "Q",
                        "K"
                      ]
                    }
                  },
                  "required": [
                    "suit",
                    "rank"
                  ],
                  "additionalProperties": false
                }
              },
              "battlefield": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "card": {
                          "type": "object",
                          "properties": {
                            "suit": {
                              "type": "string",
                              "enum": [
                                "spades",
                                "hearts",
                                "diamonds",
                                "clubs"
                              ]
                            },
                            "rank": {
                              "type": "string",
                              "enum": [
                                "A",
                                "2",
                                "3",
                                "4",
                                "5",
                                "6",
                                "7",
                                "8",
                                "9",
                                "T",
                                "J",
                                "Q",
                                "K"
                              ]
                            }
                          },
                          "required": [
                            "suit",
                            "rank"
                          ],
                          "additionalProperties": false
                        },
                        "position": {
                          "type": "object",
                          "properties": {
                            "row": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 1
                            },
                            "col": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 3
                            }
                          },
                          "required": [
                            "row",
                            "col"
                          ],
                          "additionalProperties": false
                        },
                        "currentHp": {
                          "type": "integer",
                          "minimum": 0
                        },
                        "faceDown": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "card",
                        "position",
                        "currentHp",
                        "faceDown"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "minItems": 8,
                "maxItems": 8
              },
              "drawpile": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "suit": {
                      "type": "string",
                      "enum": [
                        "spades",
                        "hearts",
                        "diamonds",
                        "clubs"
                      ]
                    },
                    "rank": {
                      "type": "string",
                      "enum": [
                        "A",
                        "2",
                        "3",
                        "4",
                        "5",
                        "6",
                        "7",
                        "8",
                        "9",
                        "T",
                        "J",
                        "Q",
                        "K"
                      ]
                    }
                  },
                  "required": [
                    "suit",
                    "rank"
                  ],
                  "additionalProperties": false
                }
              },
              "discardPile": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "suit": {
                      "type": "string",
                      "enum": [
                        "spades",
                        "hearts",
                        "diamonds",
                        "clubs"
                      ]
                    },
                    "rank": {
                      "type": "string",
                      "enum": [
                        "A",
                        "2",
                        "3",
                        "4",
                        "5",
                        "6",
                        "7",
                        "8",
                        "9",
                        "T",
                        "J",
                        "Q",
                        "K"
                      ]
                    }
                  },
                  "required": [
                    "suit",
                    "rank"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "player",
              "hand",
              "battlefield",
              "drawpile",
              "discardPile"
            ],
            "additionalProperties": false
          },
          "minItems": 2,
          "maxItems": 2
        },
        "activePlayerIndex": {
          "type": "integer",
          "minimum": 0,
          "maximum": 1
        },
        "phase": {
          "type": "string",
          "enum": [
            "setup",
            "deployment",
            "combat",
            "gameOver"
          ]
        },
        "turnNumber": {
          "type": "integer",
          "minimum": 0
        },
        "rngSeed": {
          "type": "number"
        },
        "deploymentOrder": {
          "type": "array",
          "items": {
            "type": "integer",
            "minimum": 0,
            "maximum": 1
          }
        }
      },
      "required": [
        "players",
        "activePlayerIndex",
        "phase",
        "turnNumber",
        "rngSeed"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}
